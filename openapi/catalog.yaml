components:
  schemas:
    AvailabilityStatus:
      type: string
      description: the availability status for a catalog item
      enum:
        - ANNOUNCED
        - AVAILABLE
        - DISCONTINUED

    Brand:
      type: object
      description: a model railways manufacturer
      properties:
        brand_id:
          type: string
          description: the brand unique identifier (an url encoded string)
        name:
          type: string
          description: the brand name
        registered_company_name:
          type: string
          description: the registered company name for this brand
        organization_entity_type:
          $ref: "./common.yaml#/components/schemas/OrganizationEntityType"
          description: the entity type
        group_name:
          type: string
          description: the group name when this brand is part of group of brands
        description:
          type: string
        address:
          $ref: "./common.yaml#/components/schemas/Address"
        contact_info:
          $ref: "./common.yaml#/components/schemas/ContactInfo"
        kind:
          $ref: "#/components/schemas/BrandKind"
        status:
          $ref: "#/components/schemas/BrandStatus"
        socials:
          $ref: "./common.yaml#/components/schemas/Socials"
        metadata:
          $ref: "./common.yaml#/components/schemas/Metadata"
      required:
        - brand_id
        - name
        - kind
        - metadata

    BrandKind:
      type: string
      description: the kind of brand
      enum:
        - BRASS_MODELS
        - INDUSTRIAL

    BrandRequest:
      type: object
      description: a request to create/update model railways brands
      properties:
        name:
          type: string
          maxLength: 50
        registered_company_name:
          type: string
          maxLength: 100
        organization_entity_type:
          $ref: "./common.yaml#/components/schemas/OrganizationEntityType"
        group_name:
          type: string
          maxLength: 100
        description:
          type: string
          maxLength: 1000
        contact_info:
          $ref: "./common.yaml#/components/schemas/ContactInfo"
        address:
          $ref: "./common.yaml#/components/schemas/Address"
        socials:
          $ref: "./common.yaml#/components/schemas/Socials"
        kind:
          $ref: "#/components/schemas/BrandKind"
        status:
          $ref: "#/components/schemas/BrandStatus"
      required:
        - name
        - kind

    BrandStatus:
      type: string
      description: the status of a brand
      enum:
        - ACTIVE
        - OUT_OF_BUSINESS

    CatalogItem:
      type: object
      description: a model railway catalog item
      properties:
        catalog_item_id:
          type: string
          description: the unique identifier for this catalog item
        brand:
          $ref: "#/components/schemas/CatalogItemBrand"
        item_number:
          type: string
          description: the catalog item number
        scale:
          $ref: "#/components/schemas/CatalogItemScale"
        category:
          $ref: "#/components/schemas/CatalogItemCategory"
        description:
          type: string
          description: the catalog item description
        details:
          type: string
          description: the catalog item details
        power_method:
          $ref: "#/components/schemas/PowerMethod"
        delivery_date:
          type: string
          description: this catalog item delivery date (either the year or the quarter)
        availability_status:
          $ref: "#/components/schemas/AvailabilityStatus"
        rolling_stocks:
          type: array
          items:
            oneOf:
              - $ref: "#/components/schemas/ElectricMultipleUnit"
              - $ref: "#/components/schemas/FreightCar"
              - $ref: "#/components/schemas/Locomotive"
              - $ref: "#/components/schemas/PassengerCar"
              - $ref: "#/components/schemas/Railcar"
            discriminator:
              propertyName: category
        count:
          type: integer
          format: int32
          description: the number of rolling stocks for this catalog item
        metadata:
          $ref: "./common.yaml#/components/schemas/Metadata"

    CatalogItemBrand:
      type: object
      description: the catalog item brand
      properties:
        brand_id:
          type: string
        display:
          type: string
      required:
        - id
        - display

    CatalogItemCategory:
      type: string
      description: the catalog item category
      enum:
        - ELECTRIC_MULTIPLE_UNITS
        - FREIGHT_CARS
        - LOCOMOTIVES
        - PASSENGER_CARS
        - RAILCARS
        - STARTER_SETS
        - TRAIN_SETS

    CatalogItemRequest:
      type: object
      description: the request to create/update a catalog item
      properties:
        brand:
          type: string
          minLength: 3
          maxLength: 50
          description: the catalog item brand name
        item_number:
          type: string
          minLength: 3
          maxLength: 10
          description: the catalog item number
        scale:
          type: string
          maxLength: 10
          description: the catalog item scale
        category:
          $ref: "#/components/schemas/CatalogItemCategory"
        description:
          type: string
          maxLength: 2500
          description: the catalog item description
        details:
          type: string
          maxLength: 2500
          description: the catalog item details
        power_method:
          $ref: "#/components/schemas/PowerMethod"
        delivery_date:
          type: string
          minLength: 4
          maxLength: 7
          description: this catalog item delivery date (either the year or the quarter)
        availability_status:
          $ref: "#/components/schemas/AvailabilityStatus"
        rolling_stocks:
          type: array
          items:
            oneOf:
              - $ref: "#/components/schemas/ElectricMultipleUnitRequest"
              - $ref: "#/components/schemas/FreightCarRequest"
              - $ref: "#/components/schemas/LocomotiveRequest"
              - $ref: "#/components/schemas/PassengerCarRequest"
              - $ref: "#/components/schemas/RailcarRequest"
            discriminator:
              propertyName: category
        count:
          type: integer
          format: int32
          minimum: 1
          description: the number of rolling stocks for this catalog item
      required:
        - brand
        - item_number
        - scale
        - category
        - count

    CatalogItemScale:
      type: object
      description: the catalog item scale
      properties:
        scale_id:
          type: string
        display:
          type: string
      required:
        - id
        - display

    Control:
      type: string
      description: the rolling stock control method
      enum:
        - DCC
        - DCC_READY
        - DCC_SOUND
        - NO_DCC

    Coupling:
      type: object
      description: the rolling stock coupling
      properties:
        socket:
          $ref: "#/components/schemas/Socket"
        close_couplers:
          $ref: "#/components/schemas/FeatureFlag"
        digital_shunting:
          $ref: "#/components/schemas/FeatureFlag"
      required:
        - socket

    DccInterface:
      type: string
      description: the rolling stock DCC interface
      enum:
        - MTC_21
        - NEM_651
        - NEM_652
        - NEM_654
        - NEXT_18
        - NEXT_18_S
        - PLUX_12
        - PLUX_16
        - PLUX_22
        - PLUX_8

    ElectricMultipleUnitRequest:
      description: the request to create/update an electric multiple unit rolling stocks
      allOf:
        - $ref: "#/components/schemas/RollingStockRequest"
        - type: object
          properties:
            type_name:
              type: string
              maxLength: 25
            road_number:
              type: string
              maxLength: 15
            series:
              type: string
              maxLength: 50
            depot:
              type: string
              maxLength: 100
            electric_multiple_unit_type:
              $ref: "#/components/schemas/ElectricMultipleUnitType"
            dcc_interface:
              $ref: "#/components/schemas/DccInterface"
            control:
              $ref: "#/components/schemas/Control"
            is_dummy:
              type: boolean
      required:
        - type_name
        - electric_multiple_unit_type
        - is_dummy

    ElectricMultipleUnit:
      description: an electric multiple unit rolling stock
      allOf:
        - $ref: "#/components/schemas/RollingStock"
        - type: object
          properties:
            type_name:
              type: string
            road_number:
              type: string
            series:
              type: string
            depot:
              type: string
            electric_multiple_unit_type:
              $ref: "#/components/schemas/ElectricMultipleUnitType"
            dcc_interface:
              $ref: "#/components/schemas/DccInterface"
            control:
              $ref: "#/components/schemas/Control"
            is_dummy:
              type: boolean
      required:
        - type_name
        - electric_multiple_unit_type
        - is_dummy

    ElectricMultipleUnitType:
      type: string
      description: the electric multiple unit type
      enum:
        - DRIVING_CAR
        - MOTOR_CAR
        - POWER_CAR
        - TRAILER_CAR

    FeatureFlag:
      type: string
      description: a feature flag for rolling stock technical specifications
      enum:
        - YES
        - NO
        - N_A

    FreightCar:
      description: a freight car rolling stock
      allOf:
        - $ref: "#/components/schemas/RollingStock"
        - type: object
          properties:
            type_name:
              type: string
            road_number:
              type: string
            freight_car_type:
              $ref: "#/components/schemas/FreightCarType"
      required:
        - type_name

    FreightCarRequest:
      description: a request to create/update freight car rolling stocks
      allOf:
        - $ref: "#/components/schemas/RollingStockRequest"
        - type: object
          properties:
            type_name:
              type: string
              maxLength: 25
            road_number:
              type: string
              maxLength: 15
            freight_car_type:
              $ref: "#/components/schemas/FreightCarType"
      required:
        - type_name

    FreightCarType:
      type: string
      description: the freight car type
      enum:
        - AUTO_TRANSPORT_CARS
        - BRAKE_WAGON
        - CONTAINER_CARS
        - COVERED_FREIGHT_CARS
        - DEEP_WELL_FLAT_CARS
        - DUMP_CARS
        - GONDOLA
        - HEAVY_GOODS_WAGONS
        - HINGED_COVER_WAGONS
        - HOPPER_WAGON
        - REFRIGERATOR_CARS
        - SILO_CONTAINER_CARS
        - SLIDE_TARPAULIN_WAGON
        - SLIDING_WALL_BOXCARS
        - SPECIAL_TRANSPORT
        - STAKE_WAGONS
        - SWING_ROOF_WAGON
        - TANK_CARS
        - TELESCOPE_HOOD_WAGONS

    LengthOverBuffer:
      type: object
      description: the length over buffer of a rolling stock
      properties:
        inches:
          type: number
          format: float
        millimeters:
          type: number
          format: float

    Locomotive:
      description: a locomotive rolling stock
      allOf:
        - $ref: "#/components/schemas/RollingStock"
        - type: object
          properties:
            class_name:
              type: string
            road_number:
              type: string
            series:
              type: string
            depot:
              type: string
            locomotive_type:
              $ref: "#/components/schemas/LocomotiveType"
            dcc_interface:
              $ref: "#/components/schemas/DccInterface"
            control:
              $ref: "#/components/schemas/Control"
            is_dummy:
              type: boolean
      required:
        - locomotive_type
        - class_name
        - road_number
        - is_dummy

    LocomotiveRequest:
      description: a request to create/update locomotive rolling stocks
      allOf:
        - $ref: "#/components/schemas/RollingStockRequest"
        - type: object
          properties:
            class_name:
              type: string
              maxLength: 15
            road_number:
              type: string
              maxLength: 15
            series:
              type: string
              maxLength: 50
            depot:
              type: string
              maxLength: 100
            locomotive_type:
              $ref: "#/components/schemas/LocomotiveType"
            dcc_interface:
              $ref: "#/components/schemas/DccInterface"
            control:
              $ref: "#/components/schemas/Control"
            is_dummy:
              type: boolean
      required:
        - locomotive_type
        - class_name
        - road_number
        - is_dummy

    LocomotiveType:
      type: string
      description: the locomotive type
      enum:
        - DIESEL_LOCOMOTIVE
        - ELECTRIC_LOCOMOTIVE
        - STEAM_LOCOMOTIVE

    PassengerCar:
      description: a passenger car rolling stock
      allOf:
        - $ref: "#/components/schemas/RollingStock"
        - type: object
          properties:
            type_name:
              type: string
            road_number:
              type: string
            passenger_car_type:
              $ref: "#/components/schemas/PassengerCarType"
            service_level:
              type: string
      required:
        - type_name

    PassengerCarRequest:
      description: a request to create/update passenger car rolling stocks
      allOf:
        - $ref: "#/components/schemas/RollingStockRequest"
        - type: object
          properties:
            type_name:
              type: string
              maxLength: 25
            road_number:
              type: string
              maxLength: 15
            passenger_car_type:
              $ref: "#/components/schemas/PassengerCarType"
            service_level:
              type: string
              maxLength: 15
      required:
        - type_name

    PassengerCarType:
      type: string
      description: the passenger car type
      enum:
        - BAGGAGE_CAR
        - COMBINE_CAR
        - COMPARTMENT_COACH
        - DINING_CAR
        - DOUBLE_DECKER
        - DRIVING_TRAILER
        - LOUNGE
        - OBSERVATION
        - OPEN_COACH
        - RAILWAY_POST_OFFICE
        - SLEEPING_CAR

    PowerMethod:
      type: string
      description: the rolling stock power method
      enum:
        - AC
        - DC
        - TRIX_EXPRESS

    Railcar:
      description: a railcar rolling stock
      allOf:
        - $ref: "#/components/schemas/RollingStock"
        - type: object
          properties:
            type_name:
              type: string
            road_number:
              type: string
            series:
              type: string
            depot:
              type: string
            railcar_type:
              $ref: "#/components/schemas/RailcarType"
            dcc_interface:
              $ref: "#/components/schemas/DccInterface"
            control:
              $ref: "#/components/schemas/Control"
            is_dummy:
              type: boolean
      required:
        - type_name
        - railcar_type
        - is_dummy

    RailcarRequest:
      description: a request to create/update railcar rolling stocks
      allOf:
        - $ref: "#/components/schemas/RollingStockRequest"
        - type: object
          properties:
            type_name:
              type: string
              maxLength: 25
            road_number:
              type: string
              maxLength: 15
            series:
              type: string
              maxLength: 50
            depot:
              type: string
              maxLength: 100
            railcar_type:
              $ref: "#/components/schemas/RailcarType"
            dcc_interface:
              $ref: "#/components/schemas/DccInterface"
            control:
              $ref: "#/components/schemas/Control"
            is_dummy:
              type: boolean
      required:
        - type_name
        - railcar_type
        - is_dummy

    RailcarType:
      type: string
      description: the railcar type
      enum:
        - POWER_CAR
        - TRAILER_CAR

    Railway:
      type: object
      description: a company which operates a railway network
      properties:
        railway_id:
          type: string
          description: the unique railway identifier (an URL encoded string)
        name:
          type: string
          description: the railway name
        abbreviation:
          type: string
          description: the railway abbreviated name
        registered_company_name:
          type: string
          description: the registered company name
        organization_entity_type:
          $ref: "./common.yaml#/components/schemas/OrganizationEntityType"
        description:
          type: string
          description: the railway description
        country:
          type: string
          description: the registration country
        period_of_activity:
          $ref: "#/components/schemas/RailwayPeriodOfActivity"
        gauge:
          meters:
            type: number
            format: float
            minimum: 0.1
            description: the track gauge in meters
          track_gauge:
            $ref: "#/components/schemas/TrackGauge"
        headquarters:
          type: string
          description: the railway headquarter
        total_length:
          type: object
          properties:
            miles:
              type: number
              format: float
              minimum: 0.1
              description: the total railway network in miles
            kilometers:
              type: number
              format: float
              minimum: 0.1
              description: the total railway network in kilometers
        contact_info:
          $ref: "./common.yaml#/components/schemas/ContactInfo"
        socials:
          $ref: "./common.yaml#/components/schemas/Socials"
        metadata:
          $ref: "./common.yaml#/components/schemas/Metadata"

    RailwayPeriodOfActivity:
      type: object
      description: the period of activity for a railway company
      properties:
        operating_since:
          type: string
          format: date
        operating_until:
          type: string
          format: date
        status:
          $ref: "#/components/schemas/RailwayStatus"
      required:
        - status

    RailwayRequest:
      type: object
      description: the request to create/update railways
      properties:
        name:
          type: string
          maxLength: 25
        registered_company_name:
          type: string
          maxLength: 250
        organization_entity_type:
          $ref: "./common.yaml#/components/schemas/OrganizationEntityType"
        description:
          type: string
          maxLength: 1000
        country:
          type: string
          minLength: 2
          maxLength: 2
        period_of_activity:
          $ref: "#/components/schemas/RailwayPeriodOfActivity"
        gauge:
          meters:
            type: number
            format: float
            minimum: 0.1
          track_gauge:
            $ref: "#/components/schemas/TrackGauge"
        headquarters:
          type: string
          maxLength: 250
        total_length:
          type: object
          properties:
            miles:
              type: number
              format: float
              minimum: 0.1
            kilometers:
              type: number
              format: float
              minimum: 0.1
        contact_info:
          $ref: "./common.yaml#/components/schemas/ContactInfo"
        socials:
          $ref: "./common.yaml#/components/schemas/Socials"
      required:
        - name
        - country

    RailwayStatus:
      type: string
      description: the railway activity status
      enum:
        - ACTIVE
        - INACTIVE

    RollingStock:
      type: object
      discriminator:
        propertyName: category
      properties:
        rolling_stock_id:
          type: string
          format: uuid
          description: the unique identifier for this rolling stock
        railway:
          $ref: "#/components/schemas/RollingStockRailway"
        category:
          $ref: "#/components/schemas/RollingStockCategory"
        epoch:
          type: string
          description: the epoch for this rolling stock
        livery:
          type: string
          description: the livery description
        length_over_buffer:
          $ref: "#/components/schemas/LengthOverBuffer"
        technical_specifications:
          $ref: "#/components/schemas/TechnicalSpecifications"
      required:
        - rolling_stock_id
        - railway
        - category
        - epoch

    RollingStockCategory:
      type: string
      description: the rolling stock category
      enum:
        - ELECTRIC_MULTIPLE_UNITS
        - FREIGHT_CARS
        - LOCOMOTIVES
        - PASSENGER_CARS
        - RAILCARS

    RollingStockRailway:
      type: object
      description: the railway company for a rolling stock
      properties:
        railway_id:
          type: string
        display:
          type: string

    RollingStockRequest:
      type: object
      discriminator:
        propertyName: category
      properties:
        railway:
          type: string
          maxLength: 25
          description: the railway name for this rolling stock
        category:
          $ref: "#/components/schemas/RollingStockCategory"
        epoch:
          type: string
          maxLength: 10
          description: the epoch for this rolling stock
        livery:
          type: string
          maxLength: 50
          description: the livery description
        length_over_buffer:
          $ref: "#/components/schemas/LengthOverBuffer"
        technical_specifications:
          $ref: "#/components/schemas/TechnicalSpecifications"
      required:
        - railway
        - category
        - epoch

    Scale:
      type: object
      description: a rail transport modelling scale
      properties:
        scale_id:
          type: string
          description: the unique identifier for a scale
        name:
          type: string
          description: the scale name
        ratio:
          type: number
          format: float
          description: This scale ratio between the real world and the model (e.g. 1/87 or 1:87)
        gauge:
          millimeters:
            type: number
            format: float
            description: the distance between the rails in millimeters
          inches:
            type: number
            format: float
            description: the distance between the rails in inches
          track_gauge:
            $ref: "#/components/schemas/TrackGauge"
        description:
          type: string
          description: the modelling scale description
        standards:
          type: array
          items:
            type: string
            enum:
              - BRITISH
              - JAPANESE
              - NEM
              - NMRA
        metadata:
          $ref: "./common.yaml#/components/schemas/Metadata"
      required:
        - scale_id
        - name
        - ratio
        - gauge

    ScaleRequest:
      type: object
      description: a request to create/update rail transport modelling scales
      properties:
        name:
          type: string
          maxLength: 10
          description: the scale name
        ratio:
          type: number
          format: float
          minimum: 1
          maximum: 220
          description: This scale ratio between the real world and the model (e.g. 1/87 or 1:87)
        gauge:
          millimeters:
            type: number
            format: float
            minimum: 1
            description: the distance between the rails in millimeters
          inches:
            type: number
            format: float
            minimum: 0.01
            description: the distance between the rails in inches
          track_gauge:
            $ref: "#/components/schemas/TrackGauge"
        description:
          type: string
          maxLength: 2500
          description: the modelling scale description
        standards:
          type: array
          items:
            type: string
            enum:
              - BRITISH
              - JAPANESE
              - NEM
              - NMRA
      required:
        - name
        - ratio
        - gauge

    Socket:
      type: string
      description: the rolling stock coupling socket
      enum:
        - NONE
        - NEM_355
        - NEM_356
        - NEM_357
        - NEM_359
        - NEM_360
        - NEM_362
        - NEM_365

    TrackGauge:
      type: string
      description: the track gauge
      enum:
        - BROAD
        - MEDIUM
        - MINIMUM
        - NARROW
        - STANDARD

    TechnicalSpecifications:
      type: object
      description: the technical specification for a rolling stock
      properties:
        minimum_radius:
          type: number
          format: float
          minimum: 0.1
          description: the minimum drivable radius (in millimeters)
        coupling:
          $ref: "#/components/schemas/Coupling"
        flywheel_fitted:
          $ref: "#/components/schemas/FeatureFlag"
        metal_body:
          $ref: "#/components/schemas/FeatureFlag"
        interior_lights:
          $ref: "#/components/schemas/FeatureFlag"
        lights:
          $ref: "#/components/schemas/FeatureFlag"
        spring_buffers:
          $ref: "#/components/schemas/FeatureFlag"
